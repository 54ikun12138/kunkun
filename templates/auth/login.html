{% extends "base.html" %}
{% block title %}登录 | 校园消费分析系统{% endblock %}

{% block content %}
<section class="panel" style="max-width: 520px; margin: 0 auto;">
  <h1 style="margin-top: 0; margin-bottom: 1rem;">欢迎登录</h1>
  <p style="margin: 0 0 1.5rem; color: var(--muted);">
    当前系统已有 <strong>{{ data_count }}</strong> 条消费记录。
  </p>
  <form method="post">
    {% csrf_token %}
    {% for field in form %}
    <div>
      <label for="{{ field.id_for_label }}">{{ field.label }}</label>
      {{ field }}
      {% if field.errors %}
      <small style="color: var(--danger);">{{ field.errors|striptags }}</small>
      {% endif %}
    </div>
    {% endfor %}
    <div style="display:flex; gap:0.8rem; align-items:center; flex-wrap:wrap;">
      <button type="submit" class="btn btn-primary" style="flex:1;">登录</button>
      <a class="btn btn-ghost" href="{% url 'MyApp:upload_csv' %}" style="flex:1; text-align:center;">
        上传 CSV 数据
      </a>
    </div>
  </form>
  <p style="margin-top: 1.5rem; color: var(--muted);">
    尚未有账号？
    <a href="{% url 'MyApp:register' %}">前往注册</a>
  </p>
</section>
{% endblock %}

